# Mastodon Archive Viewer

This is an [Astro](https://astro.build) based Mastodon archive viewer.

A demo is available at https://eramdam.github.io/mastodon-archive-viewer/

# Disclaimer

This project is provided as-is, without any warranty.

# Quick start

1. Clone the repo
2. Run `npm install`
3. Run `npm start`
4. Terminal will show you the local URL where the site is running

You should be able to see the site with example data.

# Usage

You will need:

- A Mastodon archive file (https://docs.joinmastodon.org/user/moving/#export)
- Node.js 22+
- npm

1. Clone this repository
2. Extract your Mastodon archive
3. Place the following files inside the `data` folder:

- `actor.json`
- `outbox.json`

4. Place the following files and folders into the `public` folder:

- `media_attachments`
- `avatar.jpg`
- `header.jpg`

4. Make sure to set your `SITE_URL` in `.env` to match your deployment URL.

5. (Optional) Modify `.env` file with the following content if you want to show "private" (non public and non unlisted) posts from the archive. Those posts won't shown by default:

```
SHOW_PRIVATE_POSTS=true
```

6. (Optional) Modify `.env` file with the following content if you want to use different base path on your server, for example this:

```
BASE_PATH=/mastodon-archive-viewer
```

Will make sure the site is hosted on `https://<your domain>/mastodon-archive-viewer/`

7. Run `npm install` and `npm run build`
8. The generated site will be in the `dist` folder

# Features and specs

- [x] Tested with an archive generated by Mastodon 4.2.x
- [x] Client-side search with fuzzy matching thanks to [fuse.js](https://fusejs.io/)
- [x] Client-side pagination
- [x] Supports all media types supported by Mastodon (image, video and audio files)
- [x] Supports content warnings / sensitive content
- [x] Generate a page per post, each of which contains the thread it belongs to
- [ ] Support polls
