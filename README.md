# Mastodon Archive Viewer

This is an [Astro](https://astro.build) based Mastodon archive viewer.

A demo is available at https://eramdam.github.io/mastodon-archive-viewer/

# Disclaimer

This project is provided as-is, without any warranty.

# Usage

You will need:

- A Mastodon archive file (https://docs.joinmastodon.org/user/moving/#export)
- Node.js 22+
- npm

1. Clone this repository
2. Extract your Mastodon archive
3. Place the following files inside the `archive-data` folder:

- `actor.json`
- `outbox.json`

4. Place the following files and folders into the `public` folder:

- `media_attachments`
- `avatar.jpg`
- `header.jpg`

5. (Optional) Create a `.env` file with the following content if you want to show "private" (non public and non unlisted) posts from the archive. Those posts won't shown by default:

```
SHOW_PRIVATE_POSTS=true
```

6. Tweak the values in `astro.config.mjs` if you want to change the base URL of the generated site
7. Run `npm install` and `npm run build`
8. The generated site will be in the `dist` folder

# FAQ

**Q: My images and videos are not loading and I'm getting 404 responses, why is that?**

A: Some archives contain additional folder in their attachment URL which contains domain. To fix this, run script `npm run fix:attachments-url` after you've placed `outbox.json` to the data folder.
See reasoning: https://github.com/eramdam/mastodon-archive-viewer/pull/2#issuecomment-2508687630

# Features and specs

- [x] Tested with an archive generated by Mastodon 4.2.x
- [x] Client-side search with fuzzy matching thanks to [fuse.js](https://fusejs.io/)
- [x] Client-side pagination
- [x] Supports all media types supported by Mastodon (image, video and audio files)
- [x] Supports content warnings / sensitive content
- [x] Generate a page per post, each of which contains the thread it belongs to
- [ ] Support polls
